# Born2beRoot
> Summary: 이 문서는 시스템 관리 관련 연습 문제이다.
###### 버전: 3.2
---
### 목차

<div align="center">

| Chapter | Contents |
| :-----: | :------: |
| 1 | [서론](#Chapter-1) |
| 2 | [소개](#Chapter-2) |
| 3 | [기본 지침](#Chapter-3) |
| 4 | [필수 파트](#Chapter-4) |
| 5 | [보너스 파트](#Chapter-5) |

</div>

---
## Chapter 1
### 서론

![Screenshot from 2025-06-16 17-12-46](https://github.com/user-attachments/assets/d1884590-000c-4d64-b9d7-ad4af64317fe)

---
## Chapter 2
### 소개

이 프로젝트는 당신에게 가상 세계의 아름다움을 소개 시켜주는 것을 목표로 하고 있다.
<br>
당신은 **VirtualBox**(**VirtualBox**를 사용할 수 없다면 **UTM**)에서 특정 조건을 따르며 첫 번째 가상 머신을 만들 것이다. 이 프로젝트가 끝나면, 당신은 엄격한 규칙을 적용하면서 당신만의 운영 체제를 만들 수 있을 것이다.

---
## Chapter 3
### 기본 지침

- **VirtualBox**(**VirtualBox**를 사용할 수 없다면 **UTM**)의 사용은 필수이다.
- 저장소의 루트에는 **signature.txt** 파일이 위치해야 한다. 가상 머신의 가상 디스크의 식별 정보를 그 파일에 붙여 넣어야 한다. 제출 및 동료 평가에서 자세한 정보를 확인해라.

---
## Chapter 4
### 필수 파트

이 프로젝트는 특정 규칙을 따르며 첫 서버를 세팅할 수 있도록 내용이 구성되어 있다.

> ⚠️
>
> 서버를 설정 해보는 것이므로 최소한의 서비스만 설치할 수 있다. 이러한 이유 때문에, 그래픽 인터페이스는 사용할 수 없다. 따라서, X.org나 다른 비슷한 그래픽 서비스를 설치하는 것은 금지되어 있다. 지키지 않을 경우, 0점을 받게 될 것이다.

운영 체제 시스템으로 **Debian**의 최신 안정 버전(테스팅 버전/불안정 버전 금지)과 **Rocky**의 최신 안정 버전 둘 중에 하나를 선택해야 한다. **Debian**은 시스템 관리를 처음 해보는 당신에게 매우 추천한다.

> ℹ️
>
> Rocky를 세팅하는 것은 꽤 복잡하다. 그러므로, KDump를 설정할 필요가 없다. 그러나, SELinux는 구동 시 반드시 작동해야 하며 그 구성은 프로젝트가 요구하는 것을 충족해야 한다. 마찬가지로 데비안의 AppArmor도 반드시 구동 시 작동해야 한다.

반드시 **LVM**을 사용하여 2개의 암호화된 파티션을 생성해야 한다. 아래는 파티션으로 나눈 것의 예시이다.:
![Screenshot from 2025-06-16 17-12-57](https://github.com/user-attachments/assets/580e402d-701a-4fbe-a77a-f513e4b9f67f)


> ℹ️
>
> 디펜스 중, 당신이 고른 운영체제에 대한 몇 가지 질문을 받게 될 것이다. 예를 들어, aptitude와 apt의 차이점 혹은 SELinux와 AppArmor의 차이점에 대해 아는지 말이다. 간단하게, 무엇을 사용했는지 이해해라!

**SSH** 서비스는 가상 머신에서 필수 포트인 4242에서 구동될 것이다. 보안적인 이유로, **SSH**를 루트에서 연결되도록 하지 말아라.

> ℹ️
>
> **SSH**를 사용하는 것은 디펜스 도중 새 계정을 생성하는 방식으로 테스트 될 것이다. 그것이 어떻게 작동하는지에 대해 이해하고 있어야 한다.

**UFW**(Rocky의 경우 firewalld) firewall을 사용하여 운영 체제를 구성하고 가상 머신에서 4242 포트만 열어두어야 한다.

> ℹ️
>
> firewall은 가상 머신을 구동할 때 활성화 되어야 한다. Rocky의 경우, UFW 대신 firewalld를 사용해야 한다.

- 가상 머신의 **호스트명**은 42로 끝나는 로그인이어야 한다(예시, wil42). 평가 중에 호스트명을 수정해야 한다.
- 강력한 패스워드 방침을 적용해야 한다.
- 엄격한 규칙에 따라 **sudo**를 설치하고 구성해야 한다.
- 루트 유저 이외에도, 사용자명으로 로그인한 사용자가 존재해야 한다.
- 이 유저는 **user42**와 **sudo** 그룹에 소속되어 있어야 한다.

> ℹ️
>
> 평가 중, 당신은 새 유저를 생성하고 그룹에 넣을 수 있어야 한다.

강력한 패스워드 방침을 설정하기 위해, 당신은 다음과 같은 요구사항을 따라야 한다:

- 패스워드는 매 30일마다 만료된다.
- 비밀번호 수정 전 최소 허용 일수는 2일로 설정된다.
- 유저는 비밀번호가 만료되기 7일 전에 경고 메세지를 받아야 한다.
- 패스워드는 반드시 최소 10글자 이상이어야 한다. 대문자, 소문자, 그리고 숫자를 포함해야 한다. 또한, 연속적으로 동일한 문자를 3개 이상 포함해선 안 된다.
- 패스워드는 유저명이 포함되어 있어선 안 된다.
- 루트 패스워드에는 다음과 같은 규칙이 적용되지 않는다: 패스워드는 비밀번호는 이전 비밀번호에 속하지 않으며 최소 7글자 이상이어야 한다.
- 물론, 루트 패스워드는 이 방침을 준수해야 한다.

> ⚠️
>
> 구성 파일을 설정한 뒤, 루트 계정을 포함하여 가상 머신에 있는 모든 계정의 현재 패스워드를 변경하게 될 것이다.

**sudo** 그룹에 대해 강력한 구성을 설정하려면, 다음과 같은 요구 사항을 준수해야 한다:

- **sudo**를 사용한 인증은 잘못된 비밀번호가 있는 경우 3번의 제한 시도가 존재한다.
- 당신이 선택한 커스텀 메세지는 **sudo**를 사용했을 경우 잘못된 패스워드가 있을 때 에러 메세지로 표시될 것이다.
- **sudo**를 사용하는 각 작업은 출력과 입력 모두 아카이브 되어야 한다. 로그 파일은 **/var/log/sudo** 폴더에 저장된다.
- **TTY** 모드는 보안적인 이유 때문에 활성화 해야 한다.
- 마찬가지로 보안적인 이유 때문에, **sudo**의 경로는 반드시 제한되어야 한다.<br>예시: **/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin**

마지막으로, **monitoring.sh**라는 간단한 스크립트를 생성해라. **bash**에서 개발 되어야 한다. 

서버를 구동할 때, 스크립트는 몇 가지 정보(아래의 목록)를 모든 터미널에 10분 마다(**wall**을 살펴봐라) 표시해야 한다. 배너는 선택 사항이다. 어떠한 에러도 보이면 안 된다.

당신의 스크립트는 언제나 아래와 같은 정보를 표시해야 한다.

- 운영체제의 아키텍처와 그 커널 버전.
- 물리적 프로세스의 개수.
- 가상 프로세스의 개수.
- 서버에 있는 현재 사용 가능한 RAM과 그 사용량의 백분율.
- 서버에 있는 현재 사용 가능한 저장 용량과 그 사용량의 백분율.
- 프로세서의 현재 사용량의 백분율.
- 최신 리부트 날짜와 시간.
- LVM의 활성화 여부.
- 활성된 연결의 개수.
- 서버를 사용하고 있는 유저의 수.
- 서버의 IPv4 주소와 MAC(Media Access Control) 주소.
- **sudo** 프로그램으로 활성화 된 명령어의 개수.

> ⚠️
>
> 디펜스 중, 이 스크립트의 동작 방식에 대해 설명하라는 요청을 받게 될 것이다. 또한 그것을 수정하지 않고 중단할 수 있어야 한다. cron을 살펴봐라.

스크립트가 어떻게 동작해야 하는지에 대한 예제:
![Screenshot from 2025-06-16 17-13-05](https://github.com/user-attachments/assets/8c90bd6f-b577-4e3a-8882-d003641fe353)

아래의 두 개의 명령어를 사용해 서브젝트의 요구 사항 일부를 확인할 수 있다.

Rocky:
![Screenshot from 2025-06-16 17-13-12](https://github.com/user-attachments/assets/b7cc0c6f-443f-4afa-ac69-15cf39f6075f)

Debian:
![Screenshot from 2025-06-16 17-13-18](https://github.com/user-attachments/assets/f25bc3f8-774a-47d1-a4d8-9ec933c3fb6a)

---
## Chapter 5
### 보너스 파트

보너스 목록:

- 파티션을 올바르게 설정하여 아래와 유사한 구조를 만들어라:
![Screenshot from 2025-06-16 17-13-26](https://github.com/user-attachments/assets/06030c6c-19c5-4acd-b086-fea69758b816)

- 다음과 같은 서비스가 있는 실용적인 WordPress 웹사이트를 설정해라: lighttpd, Mari-aDB, 그리고 PHP.
- 당신이 유용하다고 생각한 서비스(NGINX / Apache2는 제외해라!)를 선택하고 설정해라. 디펜스 중, 당신의 선택을 정당화해야 한다.

> ℹ️
>
> 보너스 파트를 완성하려면, 추가적인 서비스를 설정해야 한다. 이 경우, 필요에 맞게 추가 포트를 열 수 있다. 물론, UFW/Firewalld의 규칙은 그에 맞게 조정되어야 한다.

> ⚠️
>
> 보너스 파트는 필수 파트가 완벽해야만 접근할 수 있다. 완벽하다는 것은 필수 파트가 완전히 완성됐으며 오작동 없이 동작한다는 의미이다. 만약 필수 요구사항을 전부 통과하지 못 했다면, 보너스 파트는 절대 평가 받을 수 없다.